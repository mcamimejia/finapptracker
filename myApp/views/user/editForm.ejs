<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../partials/head') %>
    <title>Profile Edition</title>
  </head>
<body>

  <%- include('../partials/header') %>

  <main>
    <div class="form-container">
        <form class="forms" action="/users/edit/<%=user.user_id%>?_method=PUT" method="POST">
            <h2>Edit your profile</h2>
            <div>
                <input class="form-input" type="text" name="name" placeholder="Name" value="<%= user.name%>">
                <% if(locals.errors && errors.name){ %>
                    <div class="text-danger">
                        <%= errors.name.msg %>
                    </div>
                <% } %>
            </div>
            <div>
                <input class="form-input" type="email" name="email" placeholder="Email" value="<%= user.email%>">
                <% if(locals.errors && errors.email){ %>
                    <div class="text-danger">
                        <%= errors.email.msg %>
                    </div>
                <% } %>
            </div>
            <div>
                <input class="form-input" type="password" name="password" placeholder="New Password">
                <% if(locals.errors && errors.password){ %>
                    <div class="text-danger">
                        <%= errors.password.msg %>
                    </div>
                <% } %>
            </div>
            <div>
                <input class="form-input" type="password" name="confirmPassword" placeholder="Confirm password">
                <% if(locals.errors && errors.confirmPassword){ %>
                    <div class="text-danger">
                        <%= errors.confirmPassword.msg %>
                    </div>
                <% } %>
            </div>
            <div>
              <label>Select your currency</label>
              <select class="form-input" name="currency">
                <% for (let currency in currencies) { %> 
                    <option value="<%=currency%>" <%= currency == user.currency ? "selected" : "" %> >
                        <%= currency%> - <%= currencies[currency]%>
                    </option>
                <%}%>
              </select>
              <% if(locals.errors && errors.currency){ %>
                  <div class="text-danger">
                      <%= errors.currency.msg %>
                  </div>
              <% } %>
            </div>
            <button type="submit">Edit</button>
        </form>
        <form action="/users/<%=user.user_id%>?_method=delete" method="POST">
            <button class="delete-account" type="submit">Delete account</button>
        </form>
    </div>
  </main>

  <%- include('../partials/footer') %>
  
</body>
</html>